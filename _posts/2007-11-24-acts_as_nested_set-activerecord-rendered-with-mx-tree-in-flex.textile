---
layout: post
title: !binary |-
  QWN0c19hc19uZXN0ZWRfc2V0ICBBY3RpdmVSZWNvcmQgcmVuZGVyZWQgd2l0
  aCBteDpUcmVlIGluICBGbGV4Lg==
typo_id: 2832
---
ActiveRecord: app/models/category.rb
<typo:code lang="ruby" title="app/models/category.rb">
class Category < ActiveRecord::Base
  acts_as_nested_set
end
</typo:code>

Controller: app/controllers/categories_controller.rb
<typo:code lang="ruby" title="app/controllers/categories_controller.rb">
class CategoriesController < ApplicationController
  def index
     Category.result_to_attributes_xml(Category.root.full_set)
  end
end
</typo:code>

Flex Application: ActsAsNestedSet.mxml
<typo:code lang="javascript" title="ActsAsNestedSet.mxml">
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" 
	layout="vertical"
	applicationComplete="categories.send()">
<mx:HTTPService id="categories" url="http://localhost:3000/categories" resultFormat="e4x" />
<mx:Tree dataProvider="{categories.lastResult}" 
	labelField="@name"
	width="100%" height="100%" />	
</mx:Application>
</typo:code>

Result:
<img src="http://onrails.org/files/20071123_categories.jpg" alt="20071123_categories.jpg" border="0" width="264" height="296" />

XML generated by Category.result_to_attributes_xml(Category.root.full_set):
<typo:code lang="xml" title="XML generated by Category.result_to_attributes_xml(Category.root.full_set)">
<node name="Main Category" id="15" description="">
  <node name="Cameras &amp; Photo" id="16" description="">
    <node name="Bags" id="17" description=""/>
    <node name="Accessories" id="18" description=""/>
    <node name="Analog Cameras" id="19" description=""/>
    <node name="Digital Cameras" id="20" description=""/>
  </node>
  <node name="Cell Phones" id="21" description="">
    <node name="Accessories" id="22" description=""/>
    <node name="Phones" id="23" description=""/>
    <node name="Prepaid Cards" id="24" description=""/>
  </node>
  <node name="Dvds" id="25" description="">
    <node name="Blueray" id="26" description=""/>
    <node name="HD DVD" id="27" description=""/>
    <node name="DVD" id="28" description=""/>
  </node>
</node>
</typo:code>

I used the http://wiki.rubyonrails.org/rails/pages/BetterNestedSet plugin.

Too cool!


UPDATE: The BetterNestedSet plugin doesn't work out of the box with Rails 2.0 RC1. Thanks Joel for that info. Read more in the comment of this blog entry.

UPDATE2: Thanks Fabien, BetterNestedSet now works with Rails 2.0!
